[wal]
enabled = true
fsync = false
buffered = true
buffer_size = "100KB"
dir = "../data/wal/"
flush_each_write = false
fsync_every_n = 1024

# Conservative mode: archive WAL files before deletion (disabled for tests by default)
conservative_mode = false
archive_dir = "../data/wal/archived/"
compression_level = 3
compression_algorithm = "zstd"

[engine]
fill_factor = 3
data_dir = "../data/cols"
index_dir = "../data/index/"
shard_count = 3
event_per_zone = 1
compaction_interval = 300
sys_io_threshold = 10
sys_memory_threshold_mb = "128MB"
max_inflight_passives = 8
segments_per_merge = 2
compaction_max_shard_concurrency = 1


[schema]
def_dir="../data/schema/"

[server]
socket_path = "/tmp/sneldb.sock"
log_level = "error"
output_format = "json"
tcp_addr = "127.0.0.1:7171"
http_addr = "127.0.0.1:8085"
ws_addr = "127.0.0.1:8086"
auth_token = "mysecrettoken"

[playground]
enabled = true
allow_unauthenticated = true

[auth]
bypass_auth = true
# Disable rate limiting for tests to avoid flaky test failures
# Rate limiting only applies to FAILED auth attempts in production
rate_limit_enabled = false
# Tests use bypass_auth=true, so rate limiting is not applied anyway

[logging]
log_dir = "../data/logs"
stdout_level = "debug"
file_level = "error"

[query]
zone_index_cache_max_entries = 256
column_block_cache_max_bytes = "64MB"
zone_surf_cache_max_bytes = "10MB"

[time]
timezone = "UTC"
week_start = "Mon"
use_calendar_bucketing = true
