[wal]
enabled = true
fsync = false
buffered = true
buffer_size = 8388608
dir = "../data/wal/"
flush_each_write = false
fsync_every_n = 2000
conservative_mode = true
archive_dir = "../data/wal/archived/"
compression_level = 3
compression_algorithm = "zstd"

[engine]
fill_factor = 4
data_dir = "../data/cols"
index_dir = "../data/index/"
shard_count = 8
event_per_zone = 8000
compaction_interval = 600
sys_io_threshold = 100
sys_memory_threshold_mb = 512
max_inflight_passives = 32
segments_per_merge = 8
compaction_max_shard_concurrency = 2
system_info_refresh_interval = 30


[schema]
def_dir="../data/schema/"

[server]
socket_path = "/tmp/sneldb.sock"
log_level = "error"
output_format = "arrow"
tcp_addr = "127.0.0.1:7171"
http_addr = "127.0.0.1:8085"
ws_addr = "127.0.0.1:8086"
auth_token = "mysecrettoken"
backpressure_threshold = 90

[playground]
enabled = true
allow_unauthenticated = true

[auth]
bypass_auth = false
# Rate limiting for FAILED authentication attempts (per second PER IP ADDRESS)
# Key behavior: Only rate limits FAILED auth attempts, successful auths bypass rate limiting
# - Legitimate clients with valid HMAC signatures: unlimited throughput (300K+ events/sec)
# - Attackers trying to brute-force signatures: limited to N failed attempts/sec per IP
# Higher limit for production environments to handle multiple legitimate connection attempts
rate_limit_per_second = 100
# Enable rate limiting for failed authentication attempts (recommended for production)
rate_limit_enabled = true
initial_admin_user = "admin"
initial_admin_key = "admin-key-123"

[logging]
log_dir = "../data/logs"
stdout_level = "debug"
file_level = "error"

[query]
zone_index_cache_max_entries = 60000
column_block_cache_max_bytes = 4294967296
zone_surf_cache_max_bytes = 4294967296
streaming_enabled = true
streaming_batch_size = 1000

[time]
timezone = "UTC"
week_start = "Mon"
use_calendar_bucketing = true
